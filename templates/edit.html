{% extends 'base.html' %}
{% block content %}
<h3>Редактировать товар</h3>
<form method="post" enctype="multipart/form-data">
  <div class="mb-3">
    <label class="form-label">Название</label>
    <input type="text" name="name" class="form-control" value="{{ product.name }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Категория</label>
    <select name="category_id" class="form-select">
      <option value="">Без категории</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}" {% if product.category_id == cat.id %}selected{% endif %}>{{ cat.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Количество</label>
    <input type="number" name="quantity" step="0.01" class="form-control" value="{{ product.quantity }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Ед. измерения</label>
    <input type="text" name="unit" value="{{ product.unit }}" class="form-control" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Размер</label>
    <input type="text" name="size" value="{{ product.size }}" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">Цена, €</label>
    <input type="number" name="price" step="0.01" value="{{ product.price }}" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">Описание</label>
    <textarea name="description" class="form-control">{{ product.description }}</textarea>
  </div>
  <div class="mb-3">
    <label class="form-label">Текущее изображение:</label><br>
    {% if product.image_url %}
      <img src="{{ product.image_url }}" alt="Product image" style="max-height:120px; max-width:200px;"><br>
    {% else %}
      <span class="text-muted">Нет картинки</span><br>
    {% endif %}
  </div>
  <div class="mb-3">
    <label class="form-label">Загрузить новую картинку</label>
    <input type="file" name="image" class="form-control" accept="image/*">
  </div>
  <button type="submit" class="btn btn-success">Сохранить</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Отмена</a>
</form>
{% endblock %}