{% extends 'base.html' %}
{% block content %}
<h3>{{ _('Добавить товар') }}</h3>
<form method="post" enctype="multipart/form-data">
  <div class="mb-3">
    <label class="form-label">{{ _('Название') }}</label>
    <input type="text" name="name" class="form-control" required>
  </div>
  <div class="mb-3">
    <label class="form-label">{{ _('Категория') }}</label>
    <select name="category_id" class="form-select">
      <option value="">{{ _('Без категории') }}</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}">{{ cat.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">{{ _('Количество') }}</label>
    <input type="number" name="quantity" step="any" min="0" class="form-control" required>
  </div>
<div class="mb-3">
  <label class="form-label">{{ _('Ед. измерения') }}</label>

  {# Локализация подписей чипов #}
  {% set loc = get_locale() %}
  {% set m2_label = 'м²' if loc == 'ru' else 'm²' %}
  {% set kg_label = 'кг' if loc == 'ru' else 'kg' %}
  {% set pcs_label = 'kpl' if loc == 'fi' else ('pcs' if loc == 'en' else 'шт') %}

  {# Текущая единица (в edit.html есть product, в create.html — может не быть) #}
  {% set cu = product.unit if product is defined and product.unit else None %}

  <select name="unit" class="form-select" required>
    <option value="m2" {{ 'selected' if cu == 'm2' or cu is none }}>{{ m2_label }}</option>
    <option value="kg" {{ 'selected' if cu == 'kg' }}>{{ kg_label }}</option>
    <option value="pcs" {{ 'selected' if cu == 'pcs' }}>{{ pcs_label }}</option>
  </select>
</div>
  <div class="mb-3">
    <label class="form-label">{{ _('Размер') }}</label>
    <input type="text" name="size" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">{{ _('Цена, €') }}</label>
    <input type="number" name="price" step="any" min="0" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">{{ _('Описание') }}</label>
    <textarea name="description" class="form-control"></textarea>
  </div>
  <div class="mb-3">
    <label class="form-label">{{ _('Картинка товара') }}</label>
<input type="file" name="images" multiple accept="image/*">
  </div>
  <button type="submit" class="btn btn-success">{{ _('Сохранить') }}</button>
  <a href="{{ url_for('index') }}" class="btn btn-secondary">{{ _('Отмена') }}</a>
</form>
{% endblock %}