{% extends 'base.html' %}
{% block content %}

<div class="auth-wrapper">
  <div class="auth-card">
    <h2 class="auth-title">{{ _('Войти') }}</h2>


    <form method="post" class="auth-form" autocomplete="on">
      {# если используете CSRF — раскомментируйте #}
      {# {{ form.csrf_token() if form is defined and form.csrf_token is defined }} #}

      <div class="mb-3">
        <label for="username" class="form-label">{{ _('Логин') }}</label>
        <input type="text"
               class="form-control"
               id="username"
               name="username"
               autocomplete="username"
               required
               autofocus
               value="{{ request.form.get('username','') }}">
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">{{ _('Пароль') }}</label>
        <div class="auth-pass">
          <input type="password"
                 class="form-control"
                 id="password"
                 name="password"
                 autocomplete="current-password"
                 required>
          <button class="auth-pass-toggle" type="button" aria-label="{{ _('Показать пароль') }}">
            <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z" fill="none" stroke="currentColor" stroke-width="1.8"/>
              <circle cx="12" cy="12" r="3.5" fill="none" stroke="currentColor" stroke-width="1.8"/>
            </svg>
          </button>
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100">{{ _('Войти') }}</button>
    </form>
  </div>
</div>

<script>
  // Показать/скрыть пароль
  (function(){
    const btn = document.querySelector('.auth-pass-toggle');
    const input = document.getElementById('password');
    if(!btn || !input) return;
    btn.addEventListener('click', () => {
      const isPwd = input.type === 'password';
      input.type = isPwd ? 'text' : 'password';
      btn.setAttribute('aria-label', isPwd ? '{{ _("Скрыть пароль") }}' : '{{ _("Показать пароль") }}');
    });
  })();
</script>

{% endblock %}